(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(5811)}])},5811:function(a,b,c){"use strict";c.r(b),c.d(b,{"default":function(){return m}});var d=c(5893),e=c(7294),f=c(3403);function g(a){var b=new Date(a);return"".concat(b.getMonth()+1,"/").concat(b.getDate(),"/").concat(b.getFullYear())}var h=e.memo(function(a){var b=a.startTime,c=a.endTime,e=a.onChangeTime,f=a.allDays,h=a.onChangeAllDays,i=a.selectedTime;return(0,d.jsxs)("div",{className:"control-panel",children:[(0,d.jsx)("h3",{children:"Heatmap"}),(0,d.jsxs)("p",{children:["Map showing earthquakes",(0,d.jsx)("br",{}),"from ",(0,d.jsx)("b",{children:g(b)})," to ",(0,d.jsx)("b",{children:g(c)}),"."]}),(0,d.jsx)("hr",{}),(0,d.jsxs)("div",{className:"input",children:[(0,d.jsx)("label",{children:"All Days"}),(0,d.jsx)("input",{type:"checkbox",name:"allday",checked:f,onChange:function(a){return h(a.target.checked)}})]}),(0,d.jsxs)("div",{className:"input ".concat(f?"disabled":""),children:[(0,d.jsxs)("label",{children:["Each Day: ",g(i)]}),(0,d.jsx)("input",{type:"range",disabled:f,min:1,max:Math.round((c-b)/864e5),value:Math.round((i-b)/864e5),step:1,onChange:function(a){e(b+864e5*a.target.value)}})]}),(0,d.jsx)("hr",{}),(0,d.jsxs)("p",{children:["Data source: ",(0,d.jsx)("a",{href:"https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson",children:"earthquakes.geojson"})]}),(0,d.jsx)("div",{className:"source-link",children:(0,d.jsx)("a",{href:"https://github.com/visgl/react-map-gl/tree/7.0-release/examples/heatmap",target:"_new",children:"View Code â†—"})})]})}),i={id:"heatmap",maxzoom:9,type:"heatmap",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",.9,"rgb(255,201,101)",],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}},j={type:"symbol",layout:{"icon-image":"custom-marker","icon-size":.7,"text-field":["get","name"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-offset":[1,-0.6],"text-anchor":"top-left","text-size":12,"text-justify":"left"},paint:{"text-color":"#005192","text-halo-color":"rgba(255,255,255,1)","text-halo-width":1,"text-halo-blur":1,"text-opacity":["interpolate",["linear"],["zoom"],5.5,0,6,1],"icon-opacity":["interpolate",["linear"],["zoom"],5.5,0,6,1]}};function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function l(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){k(a,b,c[b])})}return a}function m(){var a=(0,e.useState)(!0),b=a[0],c=a[1],g=(0,e.useState)([0,0]),k=g[0],m=g[1],n=(0,e.useState)(0),o=n[0],p=n[1],q=(0,e.useState)(null),r=q[0],s=q[1],t=(0,e.useState)(),u=t[0],v=t[1],w=(0,e.useState)(!1),x=w[0],y=w[1];(0,e.useEffect)(function(){fetch("https://docs.mapbox.com/mapbox-gl-js/assets/earthquakes.geojson").then(function(a){return a.json()}).then(function(a){var b=a.features,c=b[0].properties.time;m([b[b.length-1].properties.time,c]),s(a),p(c)}).catch(function(a){return console.error("Could not load data",a)})},[]),(0,e.useEffect)(function(){u&&x&&u.loadImage("https://trip.social/images/icons/place-custom-marker.png",function(a,b){if(a)throw a;b&&u.addImage("custom-marker",b)})},[u,x]);var z=(0,e.useMemo)(function(){var a,c,d,e,f,g;return b?r:(a=r,c=o,e=(d=new Date(c)).getFullYear(),f=d.getMonth(),g=d.getDate(),{type:"FeatureCollection",features:a.features.filter(function(a){var b=new Date(a.properties.time);return b.getFullYear()===e&&b.getMonth()===f&&b.getDate()===g})})},[r,b,o]);return(0,d.jsxs)("div",{id:"map",children:[(0,d.jsx)(f.ZP,{initialViewState:{latitude:40,longitude:-100,zoom:3},mapStyle:"mapbox://styles/mapbox/dark-v9",onLoad:function(){y(!0)},mapboxAccessToken:"pk.eyJ1IjoibWFsLXdvb2QiLCJhIjoiY2oyZ2t2em50MDAyMzJ3cnltMDFhb2NzdiJ9.X-D4Wvo5E5QxeP7K_I3O8w",ref:function(a){return a&&v(a.getMap())},children:z&&(0,d.jsxs)(f.Hw,{type:"geojson",data:z,children:[(0,d.jsx)(f.mh,l({},i)),(0,d.jsx)(f.mh,l({},j))]})}),(0,d.jsx)(h,{startTime:k[0],endTime:k[1],selectedTime:o,allDays:b,onChangeTime:p,onChangeAllDays:c})]})}}},function(a){a.O(0,[403,774,888,179],function(){return a(a.s=8581)}),_N_E=a.O()}])